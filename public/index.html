<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
  <title>Wild Time</title>

  <!-- TonConnect UI (–±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –±–µ–∑ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∑–¥–µ—Å—å) -->
  <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
  <!-- Telegram Web App SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ —à—Ä–∏—Ñ—Ç–∞ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å mf) -->
  <link rel="preload" href="/fonts/mf.woff2" as="font" type="font/woff2" crossorigin>

  <!-- –°—Ç–∏–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞ -->
  <link rel="stylesheet" href="/style.css" />
</head>
<body>
<!-- Splash Screen —Å —Ñ–æ–Ω–æ–≤—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º -->
<div id="splash" class="splash">
  <!-- –§–æ–Ω–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ - –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–≤–æ—ë -->
  <div class="splash__background">
    <img src="/images/splashbackgroung.jpg" alt="" class="splash__bg-image">
  </div>
  
  <!-- –ó–∞—Ç–µ–º–Ω—è—é—â–∏–π –æ–≤–µ—Ä–ª–µ–π -->
  <div class="splash__overlay"></div>
  
  <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –ø–æ —Ü–µ–Ω—Ç—Ä—É -->
  <div class="splash__center">
    <div class="splash__brandRow">
      <img src="/images/logo.png" alt="WildGift" class="splash__logo">
      <div class="splash__brand">WildGift</div>
    </div>

    <div class="splash__progress">
      <div class="splash__bar">
        <div class="splash__bar-fill" id="splash-fill"></div>
      </div>
      <!-- –ü—Ä–æ—Ü–µ–Ω—Ç —Å–∫—Ä—ã—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é -->
      <div class="splash__percent" id="splash-percent" hidden>0%</div>
    </div>
  </div>
</div>

  <div class="app">

   <!-- ===== TOP BAR ===== -->
<header class="topbar" role="banner">
  <!-- –ü–∏–ª—é–ª—è –ø—Ä–æ—Ñ–∏–ª—è (–∞–≤–∞—Ç–∞—Ä + –∏–º—è) -->
  <button id="userPill" class="pill pill--user" type="button" aria-label="Open profile">
    <img id="userAvatar" class="pill-avatar" src="/images/avatar-default.png" alt="" />
    <span id="userName" class="pill-username">Guest</span>
  </button>

  <!-- TON/Stars –±–∞–ª–∞–Ω—Å (–æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–µ–ø–æ–∑–∏—Ç) -->
  <div class="balance">
    <button id="tonPill" class="pill pill--ton" type="button" aria-label="Balance" data-open-deposit>
      <!-- üî• –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∏–∫–æ–Ω–∫–∞ –≤–∞–ª—é—Ç—ã (TON –∏–ª–∏ Stars) -->
      <img 
        id="pillCurrencyIcon" 
        src="/icons/ton.svg" 
        alt="Currency" 
        class="pill-icon"
        style="transition: opacity 0.15s ease, transform 0.15s ease;"
      />
      <span id="tonAmount">0.00</span>
      <img src="/icons/plus.svg" alt="" class="pill-plus-icon" />
    </button>
  </div>
</header>

    <!-- ===== HISTORY (–∏–∫–æ–Ω–∫–∏ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤—ã–ø–∞–¥–µ–Ω–∏–π ‚Äî –¥–æ–±–∞–≤–ª—è–π —á–µ—Ä–µ–∑ JS) ===== -->
    <section class="history wheel-only" aria-label="Last results">
      <div id="historyList" class="history-list">
        <!-- –ø—Ä–∏–º–µ—Ä —ç–ª–µ–º–µ–Ω—Ç–∞ –∏—Å—Ç–æ—Ä–∏–∏ —Å –∏–∫–æ–Ω–∫–æ–π:
        <div class="history-item">
          <img src="/images/history/1x_small.png" alt="1x" />
        </div>
        -->
      </div>
    </section>

    <!-- ===== WHEEL PAGE ===== -->
    <main id="wheelPage" class="page page-active">
      <section class="wheel" aria-label="Wheel">
        <canvas id="wheelCanvas" width="420" height="420" aria-label="Wheel canvas"></canvas>
        <div id="pointer" class="pointer" aria-hidden="true">‚ñº</div>
        <div id="countdown" class="countdown" aria-live="polite" aria-atomic="true">
          <span id="countNum">9</span>
        </div>
      </section>

      <!-- ===== BET OVERLAY ===== -->
      <section id="betOverlay" class="bet-overlay" aria-label="Betting panel">
        <div class="bet-controls">
          <!-- –°—É–º–º—ã (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ - –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è JS) -->
          <div class="bet-amounts" aria-label="Bet amount">
            <button class="amount-btn" data-amount="0.1">
              <img src="/icons/amount-0.1.svg" alt="0.1 TON" />
            </button>
            <button class="amount-btn" data-amount="0.5">
              <img src="/icons/amount-0.5.svg" alt="0.5 TON" />
            </button>
            <button class="amount-btn" data-amount="1">
              <img src="/icons/amount-1.svg" alt="1 TON" />
            </button>
            <button class="amount-btn" data-amount="2.5">
              <img src="/icons/amount-2.5.svg" alt="2.5 TON" />
            </button>
          </div>

          <!-- –î–µ–π—Å—Ç–≤–∏—è (SVG-–∏–∫–æ–Ω–∫–∏) -->
          <div class="bet-actions" aria-label="Bet actions">
            <button class="action-btn undo" data-action="undo" aria-label="Undo">
              <img src="/icons/undo.svg" alt="" />
            </button>
            <button class="action-btn clear" data-action="clear" aria-label="Clear">
              <img src="/icons/clear.svg" alt="" />
            </button>
            <button class="action-btn repeat" data-action="repeat" aria-label="Repeat">
              <img src="/icons/repeat.svg" alt="" />
            </button>
          </div>
        </div>

        <!-- –°–µ—Ç–∫–∞ –ª–æ—Ç–æ–≤ (–±–æ–ª—å—à–∏–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏) -->
        <div class="bet-grid" role="grid" aria-label="Select segment">
          <!-- —Ä—è–¥ 1 -->
          <button class="bet-tile muted" role="gridcell" data-seg="1x">
            <img class="bet-img" src="/images/bets/1x.png" alt="1x" />
            <span class="bet-badge" data-badge-for="1x" hidden>0</span>
          </button>
          <button class="bet-tile muted" role="gridcell" data-seg="3x">
            <img class="bet-img" src="/images/bets/3x.png" alt="3x" />
            <span class="bet-badge" data-badge-for="3x" hidden>0</span>
          </button>
          <!-- —Ä—è–¥ 2 -->
          <button class="bet-tile muted" role="gridcell" data-seg="7x">
            <img class="bet-img" src="/images/bets/7x.png" alt="7x" />
            <span class="bet-badge" data-badge-for="7x" hidden>0</span>
          </button>
          <button class="bet-tile muted" role="gridcell" data-seg="11x">
            <img class="bet-img" src="/images/bets/11x.png" alt="11x" />
            <span class="bet-badge" data-badge-for="11x" hidden>0</span>
          </button>
          <!-- —Ä—è–¥ 3 (–±–æ–Ω—É—Å—ã) -->
          <button class="bet-tile bonus" role="gridcell" data-seg="50&50">
            <img class="bet-img" src="/images/bets/50-50.png" alt="50&50" />
            <span class="bet-badge" data-badge-for="50&50" hidden>0</span>
          </button>
          <button class="bet-tile bonus" role="gridcell" data-seg="Loot Rush">
            <img class="bet-img" src="/images/bets/loot.png" alt="Loot Rush" />
            <span class="bet-badge" data-badge-for="Loot Rush" hidden>0</span>
          </button>
          <!-- —Ä—è–¥ 4 (—à–∏—Ä–æ–∫–∏–π –±–æ–Ω—É—Å) -->
          <button class="bet-tile bonus wide" role="gridcell" data-seg="Wild Time">
            <img class="bet-img" src="/images/bets/wild.png" alt="Wild Time" />
            <span class="bet-badge" data-badge-for="Wild Time" hidden>0</span>
          </button>
        </div>
      </section>
    </main>




   <!-- ===== CASES PAGE ===== -->
   <main id="casesPage" class="page">
    <!-- Filter tabs -->
    <div class="cases-filter">
      <button class="filter-tab active" data-filter="all">All</button>
      <button class="filter-tab" data-filter="limited">Limited</button>
      <button class="filter-tab" data-filter="rare">Rare</button>
    </div>

    <section class="cases" aria-label="Cases">
      <div class="cases-grid" id="casesGrid">
        <!-- Cases –±—É–¥—É—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ JS -->
      </div>
    </section>
  </main>

  <!-- ===== CASE DETAIL PAGE ===== -->
  <main id="caseDetailPage" class="page">
    <button id="caseBackBtn" class="back-btn" aria-label="Back to cases">
      <svg viewBox="0 0 24 24" class="back-icon">
        <path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" fill="none"/>
      </svg>
      <span>Back</span>
    </button>

    <section class="case-detail">
      <div class="case-detail__hero">
        <img id="caseDetailImage" src="/images/cases/case-01.png" alt="" class="case-detail__image" />
        <div class="case-detail__glow"></div>
        
        <!-- Progress indicator -->
        <div id="caseProgress" class="case-progress">
          <div class="case-progress__bar">
            <div class="case-progress__fill"></div>
          </div>
          <div class="case-progress__text">
            <span id="progressCurrent">0</span> / <span id="progressTotal">0</span>
          </div>
        </div>
      </div>

      <div class="case-detail__info">
        <div class="case-detail__header">
          <h2 id="caseDetailTitle" class="case-detail__title">Case Name</h2>
          <span id="caseDetailRarity" class="case-rarity-badge">Limited</span>
        </div>
        
        <p id="caseDetailDescription" class="case-detail__description">
          Description of the case
        </p>
        
        <div class="case-detail__stats">
          <div class="stat-item">
            <span class="stat-label">Price</span>
            <div class="stat-value">
              <img src="/icons/stars.svg" alt="" class="stat-icon" />
              <span id="caseDetailPrice">0</span>
            </div>
          </div>
          <div class="stat-item">
            <span class="stat-label">Total Opened</span>
            <div class="stat-value">
              <span id="caseTotalOpened">0</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Action buttons -->
      <div class="case-actions">
        <button id="openCaseBtn" class="btn btn--primary btn--large">
          <span class="btn__text">Open for 0 ‚≠ê</span>
        </button>
        
        <button id="viewRewardsBtn" class="btn btn--ghost btn--large">
          <span class="btn__text">View All Rewards</span>
        </button>
      </div>

      <!-- Rewards section -->
      <div id="caseRewards" class="case-rewards">
        <h3 class="case-rewards__title">
          <span>Main Prize</span>
        </h3>
        <div id="mainPrize" class="main-prize">
          <!-- –ì–ª–∞–≤–Ω—ã–π –ø—Ä–∏–∑ -->
        </div>

        <h3 class="case-rewards__title">
          <span>Other prizes</span>
        </h3>
        <div id="caseRewardsList" class="case-rewards__list">
          <!-- –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–∏–∑—ã -->
        </div>
      </div>
    </section>
  </main>

    <!-- ===== INVENTORY PAGE ===== -->
    <main id="inventoryPage" class="page">
      <section class="inventory" aria-label="Inventory">
        <h2>Inventory</h2>
        <div class="inventory-grid">
          <!-- –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –ø—Ä–µ–¥–º–µ—Ç–æ–≤ -->
          <div class="inv-card">
            <img src="/images/inventory/item-01.png" alt="Item 1" class="inv-img" />
            <div class="inv-title">Item 1</div>
          </div>
          <div class="inv-card">
            <img src="/images/inventory/item-02.png" alt="Item 2" class="inv-img" />
            <div class="inv-title">Item 2</div>
          </div>
          <div class="inv-card">
            <img src="/images/inventory/item-03.png" alt="Item 3" class="inv-img" />
            <div class="inv-title">Item 3</div>
          </div>
        </div>
      </section>
    </main>









    
<!-- ===== PROFILE PAGE - REDESIGNED ===== -->
<main id="profilePage" class="page">
  <section class="profile-card">
    <!-- –ê–≤–∞—Ç–∞—Ä + –∏–º—è -->
    <img id="profileAvatar" class="profile-ava" src="/images/avatar-default.png" alt="" />
    <h2 id="profileName" class="profile-name">User</h2>
    <p id="profileHandle" class="profile-handle">@username</p>

    <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤–∞–ª—é—Ç—ã -->
    <div class="currency-switch">
      <button class="curr-btn curr-btn--active" data-currency="ton">
        <img src="/icons/ton.svg" alt="" class="curr-icon">
        <span>TON</span>
      </button>
      <button class="curr-btn" data-currency="stars">
        <img src="/icons/stars.svg" alt="" class="curr-icon">
        <span>Stars</span>
      </button>
    </div>



    <!-- –ö–æ—à–µ–ª—ë–∫ TON - –∫–æ–º–ø–∞–∫—Ç–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ -->
    <div class="wallet-card" id="walletCard">
      <div class="wallet-card__header">
        <div class="wallet-card__icon">
          <img src="/icons/ton.svg" alt="" width="24" height="24">
        </div>
        <div class="wallet-card__info">
          <div class="wallet-card__label">TON Wallet</div>
          <div id="walletCardStatus" class="wallet-card__status">Not connected</div>
        </div>
        <button id="walletCardToggle" class="wallet-card__toggle" type="button" aria-label="Toggle wallet details">
          <svg class="wallet-card__chevron" viewBox="0 0 24 24" width="20" height="20">
            <path d="M7 10l5 5 5-5" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/>
          </svg>
        </button>
      </div>

      <!-- –î–µ—Ç–∞–ª–∏ –∫–æ—à–µ–ª—å–∫–∞ (—Å–∫—Ä—ã—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
      <div id="walletCardDetails" class="wallet-card__details" hidden>
        <div class="wallet-card__address" id="walletCardAddress">‚Äî</div>
        
        <div class="wallet-card__actions">
          <button id="walletCardCopy" class="btn-action btn-action--secondary">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <rect x="9" y="9" width="13" height="13" rx="2" stroke="currentColor" stroke-width="2"/>
              <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1" stroke="currentColor" stroke-width="2"/>
            </svg>
            Copy
          </button>
          <button id="walletCardDisconnect" class="btn-action btn-action--danger">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
              <path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            Disconnect
          </button>
        </div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="profile-actions">
      <button class="profile-action-btn" data-action="deposit">
        <svg class="profile-action-icon" viewBox="0 0 24 24" width="24" height="24">
          <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <span class="profile-action-label">Deposit</span>
      </button>
      
      <button class="profile-action-btn" data-action="history">
        <svg class="profile-action-icon" viewBox="0 0 24 24" width="24" height="24">
          <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/>
          <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <span class="profile-action-label">History</span>
      </button>
      
      <button class="profile-action-btn" data-action="settings">
        <svg class="profile-action-icon" viewBox="0 0 24 24" width="24" height="24">
          <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" fill="none"/>
          <path d="M12 1v6m0 6v10M23 12h-6m-6 0H1" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <span class="profile-action-label">Settings</span>
      </button>
    </div>

  </section>
</main>

<style>
/* ============================================
   PROFILE PAGE - REDESIGNED STYLES
   ============================================ */

.profile-card {
  max-width: 430px;
  margin: 0 auto;
  padding: 24px 16px 100px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
}

/* –ê–≤–∞—Ç–∞—Ä */
.profile-ava {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  object-fit: cover;
  border: 4px solid rgba(0, 166, 255, 0.3);
  box-shadow:
    0 12px 36px rgba(0, 0, 0, 0.6),
    0 0 0 8px rgba(0, 166, 255, 0.1),
    inset 0 2px 6px rgba(255, 255, 255, 0.1);
  transition: all .3s ease;
  cursor: default;
}

.profile-name {
  margin: 16px 0 4px;
  font-size: 24px;
  font-weight: 800;
  color: #ffffff;
  letter-spacing: 0.4px;
  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  text-align: center;
}

.profile-handle {
  margin: 0 0 8px;
  font-size: 14px;
  color: #8da1b8;
  font-weight: 500;
  opacity: 0.9;
  text-align: center;
}

/* ============================================
   BALANCE DISPLAY
   ============================================ */

.profile-balance {
  width: 100%;
  max-width: 340px;
  padding: 24px 20px;
  background: linear-gradient(135deg, var(--panel), var(--card));
  border: 1px solid var(--border);
  border-radius: 20px;
  text-align: center;
  margin-top: 8px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
}

.profile-balance__label {
  font-size: 13px;
  font-weight: 600;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 12px;
}

.profile-balance__amount {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  font-size: 40px;
  font-weight: 800;
  color: var(--accent);
  line-height: 1;
}

.profile-balance__icon {
  width: 40px;
  height: 40px;
  filter: drop-shadow(0 0 8px rgba(0, 166, 255, 0.4));
  animation: iconPulse 3s ease-in-out infinite;
}

@keyframes iconPulse {
  0%, 100% {
    transform: scale(1);
    filter: drop-shadow(0 0 8px rgba(0, 166, 255, 0.4));
  }
  50% {
    transform: scale(1.05);
    filter: drop-shadow(0 0 16px rgba(0, 166, 255, 0.6));
  }
}

/* ============================================
   WALLET CARD - FIXED ANIMATION
   ============================================ */

.wallet-card {
  width: 100%;
  max-width: 340px;
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 16px;
  overflow: hidden;
  transition: all 0.3s ease;
}

.wallet-card__header {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px;
  cursor: pointer;
  transition: background 0.2s ease;
  -webkit-tap-highlight-color: transparent;
}

.wallet-card__header:hover {
  background: rgba(255, 255, 255, 0.03);
}

.wallet-card__header:active {
  background: rgba(255, 255, 255, 0.05);
}

.wallet-card__icon {
  flex-shrink: 0;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 166, 255, 0.15);
  border-radius: 12px;
}

.wallet-card__info {
  flex: 1;
  min-width: 0;
}

.wallet-card__label {
  font-size: 14px;
  font-weight: 700;
  color: var(--text);
  margin-bottom: 2px;
}

.wallet-card__status {
  font-size: 13px;
  color: var(--muted);
  font-family: 'Courier New', monospace;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.wallet-card__toggle {
  flex-shrink: 0;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  border-radius: 8px;
  color: var(--muted);
  cursor: pointer;
  transition: all 0.2s ease;
  -webkit-tap-highlight-color: transparent;
}

.wallet-card__toggle:hover {
  background: rgba(255, 255, 255, 0.05);
  color: var(--text);
}

.wallet-card__chevron {
  transition: transform 0.3s ease;
}

.wallet-card__toggle.open .wallet-card__chevron {
  transform: rotate(180deg);
}

/* –î–µ—Ç–∞–ª–∏ - FIXED: —É–±—Ä–∞–Ω—ã –ø—Ä—ã–∂–∫–∏ */
.wallet-card__details {
  /* –£–±–∏—Ä–∞–µ–º max-height –¥–ª—è –ø–ª–∞–≤–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏ */
  overflow: hidden;
  transition: opacity 0.3s ease, max-height 0.3s ease;
  opacity: 0;
  max-height: 0;
}

.wallet-card__details:not([hidden]) {
  opacity: 1;
  max-height: 200px;
  padding: 0 16px 16px;
}

.wallet-card__address {
  padding: 12px;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 12px;
  font-family: 'Courier New', monospace;
  font-size: 11px;
  color: var(--muted);
  word-break: break-all;
  line-height: 1.5;
  margin-bottom: 12px;
  user-select: text;
}

.wallet-card__actions {
  display: flex;
  gap: 8px;
}

.btn-action {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 10px 16px;
  border-radius: 10px;
  border: 1px solid var(--border);
  background: transparent;
  color: var(--text);
  font-size: 13px;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.2s ease;
  -webkit-tap-highlight-color: transparent;
}

.btn-action svg {
  flex-shrink: 0;
}

.btn-action:hover {
  background: rgba(255, 255, 255, 0.05);
  transform: translateY(-1px);
}

.btn-action:active {
  transform: translateY(0);
}

.btn-action--secondary {
  border-color: rgba(0, 166, 255, 0.3);
  color: var(--accent);
}

.btn-action--secondary:hover {
  background: rgba(0, 166, 255, 0.1);
  border-color: rgba(0, 166, 255, 0.5);
}

.btn-action--danger {
  border-color: rgba(255, 77, 79, 0.3);
  color: var(--danger);
}

.btn-action--danger:hover {
  background: rgba(255, 77, 79, 0.1);
  border-color: rgba(255, 77, 79, 0.5);
}

/* ============================================
   PROFILE ACTIONS
   ============================================ */

.profile-actions {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
  width: 100%;
  max-width: 340px;
}

.profile-action-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 16px 12px;
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 16px;
  cursor: pointer;
  transition: all 0.2s ease;
  -webkit-tap-highlight-color: transparent;
}

.profile-action-btn:hover {
  background: var(--card);
  border-color: rgba(0, 166, 255, 0.3);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 166, 255, 0.15);
}

.profile-action-btn:active {
  transform: translateY(0);
}

.profile-action-icon {
  color: var(--accent);
  flex-shrink: 0;
}

.profile-action-label {
  font-size: 12px;
  font-weight: 700;
  color: var(--text);
  text-align: center;
}

/* ============================================
   –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨
   ============================================ */

@media (max-width: 380px) {
  .profile-ava {
    width: 100px;
    height: 100px;
    border-width: 3px;
  }
  
  .profile-name {
    font-size: 20px;
  }
  
  .profile-balance__amount {
    font-size: 32px;
  }
  
  .profile-balance__icon {
    width: 32px;
    height: 32px;
  }
  
  .profile-actions {
    gap: 10px;
  }
  
  .profile-action-btn {
    padding: 14px 10px;
  }
  
  .profile-action-label {
    font-size: 11px;
  }
}

/* ============================================
   ACCESSIBILITY
   ============================================ */

@media (prefers-reduced-motion: reduce) {
  .wallet-card,
  .wallet-card__details,
  .wallet-card__chevron,
  .btn-action,
  .profile-action-btn,
  .profile-balance__icon {
    animation: none;
    transition: none;
  }
}
</style>





    <!-- ===== BOTTOM NAV (SVG + –ø–æ–¥–ø–∏—Å–∏) ===== -->
    <nav class="bottom-nav" role="navigation" aria-label="Bottom navigation">
      <button class="nav-item active" data-target="wheelPage" aria-label="Wheel">
        <img src="/icons/wheel.svg" alt="" class="nav-icon" />
        <span class="nav-label">Wheel</span>
      </button>
      <button class="nav-item" data-target="casesPage" aria-label="Cases">
        <img src="/icons/cases.svg" alt="" class="nav-icon" />
        <span class="nav-label">Cases</span>
      </button>
      <button class="nav-item" data-target="inventoryPage" aria-label="Inventory">
        <img src="/icons/inventory.svg" alt="" class="nav-icon" />
        <span class="nav-label">Inventory</span>
      </button>
      <button class="nav-item" data-target="profilePage" aria-label="Profile">
        <img src="/icons/profile.svg" alt="" class="nav-icon" />
        <span class="nav-label">Profile</span>
      </button>
    </nav>



<!-- ===== OPENING ANIMATION OVERLAY ===== -->
<div id="openingOverlay" class="opening-overlay" hidden>
  <div class="opening-content">
    <div id="openingReel" class="opening-reel">
      <!-- –ü—Ä–∏–∑—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
    </div>
  </div>
</div>

<!-- ===== RESULT MODAL ===== -->
<div id="resultModal" class="result-modal" hidden>
  <div class="result-modal__backdrop"></div>
  <div class="result-modal__content">
    <button id="resultClose" class="result-modal__close" aria-label="Close">√ó</button>
    
    <div class="result-confetti"></div>
    
    <div class="result-gift">
      <div class="result-gift__image">
        <div id="resultGiftIcon" class="result-gift__icon">üéÅ</div>
      </div>
      <h3 id="resultGiftName" class="result-gift__name">Gift Name</h3>
      <div id="resultGiftValue" class="result-gift__value">
        <img src="/icons/stars.svg" alt="" />
        <span>0</span>
      </div>
    </div>
    
    <button id="resultOpenAnother" class="btn btn--primary btn--large">
      <span class="btn__text">üéÅ Try Again</span>
    </button>
  </div>
</div>

<!-- ===== INVENTORY GRID (–µ—Å–ª–∏ –µ—â—ë –Ω–µ—Ç) ===== -->
<style>
  .inventory-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 12px;
    padding: 16px;
  }
  
  @media (max-width: 380px) {
    .inventory-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }
  
  /* –°—Ç–∏–ª–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ –∫–æ—à–µ–ª—å–∫–∞ */
  .wallet-balance-display {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 12px 16px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 12px;
    margin: 12px 0;
  }
  
  .wallet-icon {
    width: 24px;
    height: 24px;
  }
  
  .wallet-balance-label {
    font-size: 14px;
    color: rgba(255, 255, 255, 0.6);
  }
  
  .wallet-balance-value {
    font-size: 16px;
    font-weight: 600;
    color: #fff;
  }

  /* –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Ç–æ–ª—å–∫–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ wheel */
.history.wheel-only {
  display: none;
}

#wheelPage.page-active ~ .history.wheel-only {
  display: block;
}

/* –ò–ª–∏ –ø—Ä–æ—â–µ - –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –∞–∫—Ç–∏–≤–Ω–∞ wheelPage */
body:has(#wheelPage.page-active) .history.wheel-only {
  display: block;
}
</style>








<!-- ============================================
     DEPOSIT POPUPS - –ö–û–ú–ü–ê–ö–¢–ù–ê–Ø –í–ï–†–°–ò–Ø
     ============================================ -->

<!-- TON Deposit Popup -->
<div id="tonDepositPopup" class="deposit-popup">
  <div class="deposit-popup__backdrop"></div>
  <div class="deposit-popup__content deposit-popup__content--compact">
    <button class="deposit-popup__close" id="tonPopupClose" aria-label="Close">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </button>
    
    <h2 class="deposit-popup__title">Top up TON Balance</h2>
    
    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ -->
    <div id="tonErrorNotification" class="error-notification" hidden>
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" class="error-icon">
        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
        <path d="M12 8v4M12 16h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
      <span class="error-text">Minimum deposit: 0.1 TON</span>
    </div>
    
    <!-- –ü–æ–ª–µ –≤–≤–æ–¥–∞ —Å—É–º–º—ã -->
    <div class="deposit-popup__input-group">
      <label class="deposit-popup__label">Amount to deposit</label>
      <div class="deposit-popup__input-wrapper" id="tonInputWrapper">
        <img src="/icons/ton.svg" alt="TON" class="deposit-popup__input-icon">
        <input 
          type="text" 
          id="tonAmountInput" 
          class="deposit-popup__input" 
          placeholder="0.00" 
          inputmode="decimal"
          autocomplete="off"
        >
        <span class="deposit-popup__input-currency">TON</span>
      </div>
    </div>
    
    <!-- –ë–∞–ª–∞–Ω—Å –∫–æ—à–µ–ª—å–∫–∞ -->
    <div class="deposit-popup__wallet-info">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" class="deposit-popup__wallet-icon">
        <path d="M21 8V6C21 4.9 20.1 4 19 4H5C3.9 4 3 4.9 3 6V18C3 19.1 3.9 20 5 20H19C20.1 20 21 19.1 21 18V16M19 8H15C13.9 8 13 8.9 13 10V14C13 15.1 13.9 16 15 16H19M17 12H17.01" stroke="currentColor" stroke-width="2"/>
      </svg>
      <span id="tonWalletBalance">‚Äî</span>
    </div>
    
    <div class="deposit-popup__divider"></div>
    
    <button id="btnConnectTonWallet" class="deposit-popup__button">Connect Wallet</button>
    <button id="btnDepositTon" class="deposit-popup__button" style="display:none;" disabled>Deposit TON</button>
  </div>
</div>

<!-- Stars Purchase Popup -->
<div id="starsDepositPopup" class="deposit-popup">
  <div class="deposit-popup__backdrop"></div>
  <div class="deposit-popup__content deposit-popup__content--compact">
    <button class="deposit-popup__close" id="starsPopupClose" aria-label="Close">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </button>
    
    <h2 class="deposit-popup__title">Buy Telegram Stars</h2>
    
    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ -->
    <div id="starsErrorNotification" class="error-notification" hidden>
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" class="error-icon">
        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
        <path d="M12 8v4M12 16h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
      <span class="error-text">Minimum purchase: 1 ‚≠ê</span>
    </div>
    
    <!-- –ü–æ–ª–µ –≤–≤–æ–¥–∞ —Å—É–º–º—ã -->
    <div class="deposit-popup__input-group">
      <label class="deposit-popup__label">Amount to buy</label>
      <div class="deposit-popup__input-wrapper" id="starsInputWrapper">
        <img src="/icons/stars.svg" alt="" class="deposit-popup__input-icon deposit-popup__input-icon--stars">
        <input 
          type="text" 
          id="starsAmountInput" 
          class="deposit-popup__input"
          placeholder="0"
          inputmode="numeric"
          autocomplete="off"
        >
        <span class="deposit-popup__input-currency">Stars</span>
      </div>
    </div>
    
    <div class="deposit-popup__divider"></div>
    
    <button id="btnBuyStars" class="deposit-popup__button" disabled>Buy Stars</button>
  </div>
</div>

<!-- –ì–ª–æ–±–∞–ª—å–Ω—ã–π userId:  /js/*.js -->
<script>
  (function () {
    const tg = window.Telegram?.WebApp;
    // –ï–¥–∏–Ω—ã–π id (–ø–æ–¥—Å—Ç–∞–≤—å —Ç–æ—Ç, —á—Ç–æ –≤–∏–¥–∏—à—å –≤ checkBalance): 123456789
    const uid = String(tg?.initDataUnsafe?.user?.id || 1142079504);

    // –°–¥–µ–ª–∞–µ–º –µ–≥–æ –¥–æ—Å—Ç—É–ø–Ω—ã–º –≤—Å–µ–º: —á–µ—Ä–µ–∑ –≥–ª–æ–±–∞–ª –∏ localStorage
    window.AppUser = { id: uid };
    try { localStorage.setItem('uid', uid); } catch {}

    // (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ —É–¥–æ–±–Ω–æ) —Å—Ä–∞–∑—É –ø–æ–¥–ø–∏—à–µ–º—Å—è –Ω–∞ SSE –∏ –æ–±–Ω–æ–≤–∏–º –ø–∏–ª—é–ª—é –±–∞–ª–∞–Ω—Å–∞
    try {
      const es = new EventSource(`/api/balance/stream?userId=${uid}`);
      es.onmessage = (ev) => {
        try {
          const data = JSON.parse(ev.data);
          const el = document.getElementById('tonAmount'); // —ç–ª–µ–º–µ–Ω—Ç –≤ —Ç–æ–ø–±–∞—Ä–µ
          if (el && typeof data.ton !== 'undefined') {
            el.textContent = Number(data.ton).toFixed(2);
          }
        } catch {}
      };
    } catch {}
  })();
</script>




  <!-- –°–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞ -->
 
  <script src="js/splash.js" defer></script>
  <script src="/js/app.js" defer></script>
  <script src="/js/tondep.js" defer></script>
  <script src="/js/starsdep.js" defer></script>
  <script src="/js/wheel.js" defer></script>
  <script src="/js/switch.js" defer></script>
  <script src="/js/cases.js" defer></script>
  <script src="/js/profile.js" defer></script>
  <script src="/js/validation.js" defer></script>
  <script src="/js/balance-live.js" defer></script> 







  <!--üß™ TEST HELPERS - –£–¥–æ–±–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ -->

  <script>
    // üß™ TEST HELPERS - –£–¥–æ–±–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
    (function() {
      if (window.location.hostname === 'localhost' || window.location.hostname.includes('test')) {
        const tg = window.Telegram?.WebApp;
        const userId = tg?.initDataUnsafe?.user?.id ||1142079504;
        
        // üéÅ –î–∞—Ç—å —Å–µ–±–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–µ–Ω—å–≥–∏
        window.giveMoney = async function(ton = 100, stars = 1000) {
          try {
            const res = await fetch('/api/test/give-balance', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ userId, ton, stars })
            });
            const data = await res.json();
            console.log('üí∞ Balance added:', data);
            return data;
          } catch (err) {
            console.error('‚ùå Error:', err);
          }
        };
        
        // üí∞ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ—á–Ω—ã–π –±–∞–ª–∞–Ω—Å
        window.setBalance = async function(ton, stars) {
          try {
            const res = await fetch('/api/test/set-balance', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ userId, ton, stars })
            });
            const data = await res.json();
            console.log('üíé Balance set:', data);
            return data;
          } catch (err) {
            console.error('‚ùå Error:', err);
          }
        };
        
        // üîÑ –°–±—Ä–æ—Å–∏—Ç—å –±–∞–ª–∞–Ω—Å
        window.resetBalance = async function() {
          try {
            const res = await fetch('/api/test/reset-balance', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ userId })
            });
            const data = await res.json();
            console.log('üîÑ Balance reset:', data);
            return data;
          } catch (err) {
            console.error('‚ùå Error:', err);
          }
        };
        
        // üìä –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å
        window.checkBalance = async function() {
          try {
            const res = await fetch(`/api/balance?userId=${userId}`);
            const data = await res.json();
            console.log('üìä Current balance:', data);
            return data;
          } catch (err) {
            console.error('‚ùå Error:', err);
          }
        };
        
        console.log(`
    ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
    ‚ïë   üß™ TEST MODE ACTIVE             ‚ïë
    ‚ïë   User ID: ${userId}              ‚ïë
    ‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
    ‚ïë   Available commands:              ‚ïë
    ‚ïë                                    ‚ïë
    ‚ïë   giveMoney(ton, stars)           ‚ïë
    ‚ïë   ‚Üí Give yourself test money       ‚ïë
    ‚ïë                                    ‚ïë
    ‚ïë   setBalance(ton, stars)          ‚ïë
    ‚ïë   ‚Üí Set exact balance              ‚ïë
    ‚ïë                                    ‚ïë
    ‚ïë   resetBalance()                  ‚ïë
    ‚ïë   ‚Üí Reset balance to 0             ‚ïë
    ‚ïë                                    ‚ïë
    ‚ïë   checkBalance()                  ‚ïë
    ‚ïë   ‚Üí Check current balance          ‚ïë
    ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
    
    Examples:
      giveMoney(50, 500)    // Give 50 TON and 500 Stars
      setBalance(100, 1000) // Set to exactly 100 TON and 1000 Stars
      resetBalance()        // Reset to 0
      checkBalance()        // Check balance
        `);
      }
    })();
    </script>
    
</body>
</html>